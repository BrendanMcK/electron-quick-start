<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Login form</title>
  </head>
  <body>
    <h1>Pretend login form...</h1>
    <p>
      This is a simple form that does a window.location.reload() when
      submitted. It works fine with JAWS as initially loaded - JAWS calls
      out the input field names as they receive focus. But on reload,
      JAWS no longer tracks focus properly - and doesn't call out the name or
      type of current focused element. JAWS doesn't even enter forms mode;
      if you press 'H' while focus is on one of the inputs, no 'h' appears,
      instead JAWS moves to the Heading at the top of the page.
    </p>

    <form id="form">
      <div>
        <label>
          Username
          <input id="ip1"/>
        </label>
      </div>

      <div>
        <label>
          Password
          <input />
        </label>
      </div>

      <br>
      <button>Login</button>
    </form>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const input = document.getElementById('ip1');
        // defer is needed here, since the webview receiving focus
        // will set focus to its own body; we want to focus the
        // target field right after that.
        setTimeout(() => {
          input.focus();
          input.value = 'ready';
        }, 0);
      });

      const form = document.findElementById('form');
      form.addEventListener('submit', function(e) {
          e.preventDefault();
          window.location.reload();
      });
    </script>
  </body>
</html>
